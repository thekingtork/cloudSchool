{% extends app.request.isXmlHttpRequest ? "cloudBundle::layout_ajax.html.twig" : "cloudBundle::layout.html.twig" %} 
{% block title %}
    MA12
{% endblock %}
    {% block menu_principal %}
        <div id="ContAjax">
            <link rel="stylesheet" href="{{ asset('stylesheets/Ma1/Ma12/ma12.css') }}"/> 
            <div id="bloqueCgenerales">
                <div id="contenidoIzq" class="alineacionPfct">
                    <div class="botonRegresar alineacionPfct">
                        {% block back %}
                            <a href="{{ path('ma113') }}" class="ajax" ><img src="{{ asset('images/b_atras.png') }}"/></a>
                        {% endblock %}
                    </div>
                    <div id="tituloAeV" class="alineacionPfct" ><p>Ajustes de Evaluaci&oacute;n</p></div>
                    <div id="conf" class="alineacionPfct">{#Form1#}
                        <form action="{{path('ma12')}}" method="post"  id="brang">
                            {{form_errors(form)}}
                            <div id="modeloEv">
                                <p>Modelos de Evaluaci&oacute;n:</p>
                                {{form_errors(form.modelo_evaluacion)}}
                                {{form_widget(form.modelo_evaluacion)}}
                            </div>
                            <div id="contEscalaNal" class="alineacionPfct">
                                <div id="contVinetas">
                                        <div class="cajaTransp"></div>
                                        <div class="cajaBlanca"></div>
                                        <div class="cajaBlanca"></div>
                                        <div class="cajaBlanca"></div>
                                        <div class="cajaBlanca"></div>
                                </div>
                                <div id="escalaNal" class="alineacionPfct">
                                    <div class="tituloTabla">
                                        <p>Escala Nacional</p>                                        
                                    </div>
                                    <div class="itemTabla">
                                        <p>Desempe&ntilde;o Bajo</p>
                                    </div>
                                    <div class="itemTabla">
                                        <p>Desempe&ntilde;o Basico</p>
                                    </div>
                                    <div class="itemTabla">
                                        <p>Desempe&ntilde;o Alto</p>
                                    </div>
                                    <div class="itemTabla">
                                        <p>Desempe&ntilde;o Superior</p>
                                    </div>
                                </div>
                                <div id="escalaNal">
                                    <div class="tituloTabla">
                                        <p>Escala Cualitativa</p>                                        
                                    </div>
                                    <div class="itemTabla">
                                        <p>Insuficiente (I)</p>
                                    </div>
                                    <div class="itemTabla">
                                        <p>Aceptable (A)</p>
                                    </div>
                                    <div class="itemTabla">
                                        <p>Sobresaliente (S)</p>
                                    </div>
                                    <div class="itemTabla">
                                        <p>Excelente (E)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="contSelect" class="alineacionPfct">
                            <div id="escalaUso">
                                <div class="textoForm">
                                    <p>Escala de Uso</p>
                                </div>
                                    {{form_errors(form.escala)}}
                                    {{form_widget(form.escala)}}
                            </div>
                            <div id="acumulador">
                                <div class="textoForm2">
                                    <p>Acumular Periodos</p>
                                </div>
                                {{form_errors(form.acumula)}}
                                {{form_widget(form.acumula)}}
                                {{form_rest(form)}}
                            </div>
                        </div>
                        <div id="contBotones" class="alineacionPfct">
                            <button type="submit">Guardar</button>
                            <a href="javascript:void(0)" onclick="limpiaForm('#conf form'), limpiaForm('#form_Rangos')">Limpiar</a>
                            <a href="#">Cancelar</a>
                        </div>  
                    </form>
                </div>
                <div id="contenidoDer" class="alineacionPfct">
                    <div class="breadcumbr"><a href="{{ path('ma113') }}" class="ajax" >Ajustes del Sistema</a></div>
                    
                    {% render "cloudBundle:Admin:formRangos" %}
                    
                    <div class="Inicio" ><a href="{{ path('ma') }}" class="ajax" >Inicio</a></div>
                </div>
            </div>
        </div>
    </div>
        <span style="display: none;" data-url={{url('formrango')}} id="enlace"></span>
    <script src="{{ asset('javascripts/jquery.js') }}"></script>
        <script>
        
            $(document).ready(function(){
                $('#Rangos_limite1,#Rangos_limite2,#Rangos_limite3,#Rangos_limite5').click(function(){
                    if($('#cloud_sitebundle_ajustesevaluacion_escala option:selected').val()=='Escala Cuantitativa'){
                    $('#btnEnviaRangos').css('display','block')
                }
                })
                
                $('#editar').click(function(){
                    $(this).css('display','none')
                    $('#btnEnviaRangos').css('display','block')
                })
                    
                $('#cloud_sitebundle_ajustesevaluacion_escala').change(function(){
                    var valor=$('#cloud_sitebundle_ajustesevaluacion_escala option:selected').val();
                    if(valor=='Escala Cuantitativa'){
                        $('#btnEnviaRangos').css('display','block')
                    }else{
                        $('#btnEnviaRangos').css('display','none')

                    }
                })
                $('#form_Rangos').submit(function(e){
                    e.preventDefault();
                    var datos=$('#form_Rangos').serialize();
                    //console.log(datos);
                     $.ajax({
                        url:"{{ path('formrango_update') }}",
                        type:'POST',
                        data:datos,
                        success:function(){
                           $('#btnEnviaRangos').css('display','none')
                        },
                        error:function(e){
                            console.log("Error"+ e)
                            //alert("Error"+ e)
                        }
                    })
                     //return false;
                })
            })
        </script>
{% endblock %}